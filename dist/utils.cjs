"use strict";var u=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var T=(t,r)=>{for(var e in r)u(t,e,{get:r[e],enumerable:!0})},S=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of U(r))!b.call(t,o)&&o!==e&&u(t,o,{get:()=>r[o],enumerable:!(n=x(r,o))||n.enumerable});return t};var A=t=>S(u({},"__esModule",{value:!0}),t);var P={};T(P,{appendRequestQuery:()=>f,concatChunks:()=>d,getSurt:()=>l,jsonToQueryParams:()=>p,jsonToQueryString:()=>c,mfdToQueryParams:()=>y,mfdToQueryString:()=>g,postToGetUrl:()=>m,splitChunk:()=>w});module.exports=A(P);function h(t){let r;typeof t=="string"?r=t:t&&t.length?r=t.reduce((e,n)=>(e+=String.fromCharCode(n),e),""):t?r=t.toString():r="";try{return"__wb_post_data="+btoa(r)}catch{return"__wb_post_data="}}function R(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(t){try{if(!t.startsWith("https:")&&!t.startsWith("http:"))return t;t=t.replace(/^(https?:\/\/)www\d*\./,"$1");let r=t.toLowerCase(),e=new URL(r),o=e.hostname.split(".").reverse().join(",");if(e.port&&(o+=":"+e.port),o+=")",o+=e.pathname,e.search){e.searchParams.sort(),o+=e.search;for(let[s,i]of e.searchParams.entries())if(!i){let a=new RegExp(`(?<=[&?])${R(s)}=(?=&|$)`);a.exec(r)||(o=o.replace(a,s))}}return o}catch{return t}}function m(t){let{method:r,headers:e,postData:n}=t;if(r==="GET")return!1;let o=(e.get("content-type")||"").split(";")[0];function s(a){return a instanceof Uint8Array&&(a=new TextDecoder().decode(a)),a}let i="";switch(o){case"application/x-www-form-urlencoded":i=s(n);break;case"application/json":i=c(s(n));break;case"text/plain":try{i=c(s(n),!1)}catch{i=h(n)}break;case"multipart/form-data":{let a=e.get("content-type");if(!a)throw new Error("utils cannot call postToGetURL when missing content-type header");i=g(s(n),a);break}default:i=h(n)}return i!==null?(t.url=f(t.url,i,t.method),t.method="GET",t.requestBody=i,!0):!1}function f(t,r,e){if(!e)return t;let n=t.indexOf("?")>0?"&":"?";return`${t}${n}__wb_method=${e}&${r}`}function p(t,r=!0){if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}let e=new URLSearchParams,n={},o=s=>e.has(s)?(s in n||(n[s]=1),s+"."+ ++n[s]+"_"):s;try{JSON.stringify(t,(s,i)=>(["object","function"].includes(typeof i)||e.set(o(s),i),i))}catch(s){if(!r)throw s}return e}function y(t,r){let e=new URLSearchParams;t instanceof Uint8Array&&(t=new TextDecoder().decode(t));try{let n=r.split("boundary=")[1],o=t.split(new RegExp("-*"+n+"-*","mi"));for(let s of o){let i=s.trim().match(/name="([^"]+)"\r\n\r\n(.*)/im);i&&e.set(i[1],i[2])}}catch{}return e}function c(t,r=!0){return p(t,r).toString()}function g(t,r){return y(t,r).toString()}function d(t,r){if(t.length===1)return t[0];let e=new Uint8Array(r),n=0;for(let o of t)e.set(o,n),n+=o.byteLength;return e}function w(t,r){return[t.slice(0,r),t.slice(r)]}0&&(module.exports={appendRequestQuery,concatChunks,getSurt,jsonToQueryParams,jsonToQueryString,mfdToQueryParams,mfdToQueryString,postToGetUrl,splitChunk});
